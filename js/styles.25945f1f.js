"use strict";(self["webpackChunkb_web3"]=self["webpackChunkb_web3"]||[]).push([[532],{4026:function(t,e,s){s.d(e,{Z:function(){return C}});var a=function(){var t=this,e=t._self._c;return e("div",{attrs:{id:"app"}},[e("nav-bar"),e("div",{staticClass:"main-area"},[e("div",{staticClass:"blur"}),e("nav-header"),e("router-view",{staticClass:"router-view"})],1)],1)},i=[],n=function(){var t=this,e=t._self._c;return e("nav",{staticClass:"nav"},[e("router-link",{staticClass:"nav-bar-item",attrs:{to:"/"}},[e("svg",{attrs:{width:"20",height:"20",viewBox:"0 0 20 20"}},[e("path",{attrs:{d:"M9.59532 1.7853L8.54573 1.1556L8.34457 2.36294C8.02691 4.26982 6.72399 6.04197 5.28762 7.28681C2.47486 9.7245 1.85887 12.3739 2.72999 14.5627C3.56302 16.6558 5.678 18.0896 7.82456 18.3282L8.32191 18.3834C7.09333 17.6321 6.30462 15.8779 6.58044 14.5677C6.85164 13.2796 7.77836 12.0724 9.5584 10.9599L10.456 10.3989L10.7906 11.403C10.9886 11.9969 11.3301 12.4733 11.6774 12.9577C11.8448 13.1912 12.0135 13.4265 12.1681 13.6777C12.7039 14.5484 12.8458 15.5163 12.4999 16.4768C12.1851 17.3509 11.6654 18.0372 10.9501 18.418L11.7587 18.3282C13.7731 18.1043 15.2526 17.4152 16.2131 16.2625C17.1655 15.1197 17.4999 13.6492 17.4999 12.0832C17.4999 10.6245 16.901 9.12166 16.1942 7.87109C15.366 6.40581 14.2848 5.18956 13.105 4.00975C12.9008 4.41811 12.9166 4.58333 12.4961 5.23915C12.0098 3.94346 11.0802 2.67616 9.59532 1.7853Z",fill:"#AAFF00"}})]),e("span",{staticClass:"text"},[t._v(" title ")])])],1)},l=[],c={name:"NavBar",data(){return{}}},r=c,o=s(5440),d=(0,o.Z)(r,n,l,!1,null,"c4695362",null),u=d.exports,m=function(){var t=this,e=t._self._c;return e("div",{staticClass:"nav-header"},[t.isInit?e("div",{staticClass:"connected-area"},[e("span",{staticClass:"balance"},[t._v(" "+t._s(t._f("numFormat")(t.balance))+" MSC ")]),e("b-btn",{staticClass:"pd-t8 pd-b8",attrs:{type:"primary"}},[t._v(t._s(t._f("formatAddress")(t.address)))])],1):e("b-btn",{attrs:{type:"primary"},on:{click:function(e){return t.connect()}}},[t._v(t._s(t.$t("Connect")))])],1)},h=[],p=s(6230),g={name:"NavHeader",filters:{formatAddress(t){return t.substr(0,6)+"..."+t.slice(-4)}},data(){return{isInit:!1,balance:0,address:""}},mounted(){const t=localStorage.getItem("lastConnectedWallet");t&&this.connect(t),this.$wallet.currentWallet&&this.$wallet.currentWallet.defaultAccount&&this.init(),this.$wallet.on("ready",(()=>{this.init(!0)})),this.$wallet.on("disconnect",(()=>{this.isInit=!1,this.disconnect(!1)}))},methods:{init(t){t&&this.isInit||(this.isInit=!0,this.isNetworkError=!this.$wallet.checkNetwork(),this.address=this.$wallet.currentWallet.defaultAccount,this.getSingleBalance())},async connect(t="web3"){try{this.$wallet.currentWallet=this.$wallet.walletList[t],console.log(this.$wallet),await this.$wallet.currentWallet.connect(),this.currentAddress=this.$wallet.currentWallet.defaultAccount,this.currentWalletName=this.$wallet.currentWallet.walletName,localStorage.setItem("lastConnectedWallet",t),this.isShowConnectWallet=!1}catch(e){console.log(e)}},getSingleBalance(){this.$wallet.currentWallet.getSingleBalance({address:p.Z.tokenAddress}).then((t=>{this.balance=t})).catch((t=>{console.log(t)}))}}},v=g,f=(0,o.Z)(v,m,h,!1,null,"66028497",null),_=f.exports,w={name:"App",components:{NavBar:u,NavHeader:_}},y=w,b=(0,o.Z)(y,a,i,!1,null,null,null),C=b.exports},6223:function(t,e,s){s.d(e,{Z:function(){return o}});var a=function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"c-button",class:[{disabled:t.loading||t.disabled},`size-${t.size}`,`type-${t.type}`],on:{click:t.click,mouseleave:e=>t.$emit("mouseleave",e)}},"span",t.$attrs,!1),[t.loading?e("i",{staticClass:"icon-loading"},[e("svg",{staticClass:"icon",attrs:{t:"1678436109101",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4908",width:"128",height:"128"}},[e("path",{attrs:{d:"M1023.849566 529.032144C1022.533495 457.744999 1007.544916 386.64064 979.907438 321.641387 952.343075 256.605575 912.349158 197.674868 863.252422 148.980264 814.192243 100.249102 755.992686 61.717486 693.004095 36.310016 630.052062 10.792874 562.347552-1.380777 495.483865 0.081523 428.620178 1.470709 362.012394 16.495846 301.144139 44.206439 240.202769 71.807359 185.000928 111.874391 139.377154 161.044242 93.753381 210.177537 57.707676 268.450209 33.945294 331.475357 10.073239 394.463948-1.296147 462.1319 0.166154 529.032144 1.482224 595.968946 15.593423 662.503615 41.549256 723.371871 67.468531 784.240126 105.013094 839.405409 151.075558 884.956067 197.101464 930.579841 251.645269 966.552431 310.612534 990.241698 369.543241 1014.040637 432.860849 1025.336908 495.483865 1023.874608 558.143438 1022.485422 620.291206 1008.337666 677.174693 982.381833 734.094737 956.462558 785.677384 918.954552 828.230327 872.892089 870.819826 826.902741 904.416179 772.395492 926.533473 713.5379 939.986637 677.85777 949.089457 640.605667 953.915048 602.841758 955.194561 602.951431 956.510631 602.987988 957.790144 602.987988 994.27454 602.987988 1023.849566 572.425909 1023.849566 534.735116 1023.849566 532.834125 1023.739893 530.933135 1023.593663 529.032144L1023.849566 529.032144 1023.849566 529.032144ZM918.892953 710.284282C894.691881 767.021538 859.596671 818.421398 816.568481 860.82811 773.540291 903.307938 722.652236 936.75806 667.706298 958.729124 612.760359 980.773303 553.902767 991.192193 495.483865 989.729893 437.064963 988.377265 379.304096 975.106889 326.441936 950.832702 273.543218 926.668187 225.616322 891.682649 186.097653 848.764132 146.542426 805.91873 115.35887 755.176905 94.959779 700.486869 74.451015 645.796833 64.799833 587.195144 66.189018 529.032144 67.541646 470.869145 79.934642 413.437296 102.563741 360.867595 125.119725 308.297895 157.765582 260.663459 197.759499 221.364135 237.716858 182.064811 284.985719 151.137157 335.910331 130.884296 386.834944 110.55832 441.305634 101.01681 495.483865 102.47911 549.662096 103.868296 603.036061 116.261292 651.876895 138.780718 700.754287 161.22703 745.025432 193.690099 781.509828 233.428113 818.067339 273.166127 846.764984 320.142529 865.518987 370.665008 884.346105 421.224045 893.156465 475.256046 891.76728 529.032144L891.986625 529.032144C891.840395 530.933135 891.76728 532.797568 891.76728 534.735116 891.76728 569.939999 917.540325 598.893547 950.66143 602.585856 944.227308 639.728286 933.589072 675.956779 918.892953 710.284282Z","p-id":"4909"}})])]):t._e(),t._t("default")],2)},i=[],n={name:"CButton",props:{loading:{type:Boolean,default:!1},disabled:{type:[Boolean,Number],default:!1},size:{type:String,default:"medium"},type:{type:String,default:"default"}},data(){return{}},methods:{click(t){this.loading||this.disabled||this.$emit("click",t)}}},l=n,c=s(5440),r=(0,c.Z)(l,a,i,!1,null,"c989456a",null),o=r.exports},1532:function(t,e,s){s.d(e,{Z:function(){return o}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"b-empty"},[e("svg",{staticClass:"icon",attrs:{t:"1679630091400",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"2773",width:"128",height:"128"}},[e("path",{attrs:{fill:"currentColor",d:"M576 928c-6 0-11.9-1.7-17.1-5-9.3-5.9-14.9-16.1-14.9-27V554.3c0-12.4 7.1-23.6 18.3-28.9l288-136.1c9.9-4.7 21.5-4 30.8 1.9s14.9 16.1 14.9 27v341.7c0 12.4-7.1 23.6-18.3 28.9l-288 136.1c-4.4 2.1-9 3.1-13.7 3.1z m32-353.5v271l224-105.8v-271L608 574.5zM448 928c-4.7 0-9.3-1-13.7-3.1l-288-136.1c-11.2-5.3-18.3-16.6-18.3-28.9V418.2c0-11 5.6-21.2 14.9-27 9.3-5.9 20.9-6.6 30.8-1.9l288 136.1c11.2 5.3 18.3 16.6 18.3 28.9V896c0 11-5.6 21.2-14.9 27-5.2 3.3-11.1 5-17.1 5zM192 739.7l224 105.8v-271L192 468.7v271zM512 501.1c-4.7 0-9.4-1-13.8-3.1l-352-168.1c-11.2-5.4-18.3-16.7-18.2-29.2 0.1-12.4 7.4-23.7 18.8-28.8l352-159.9c8.4-3.8 18.1-3.8 26.5 0l352 159.9c11.3 5.1 18.6 16.4 18.8 28.8 0.1 12.4-7 23.8-18.2 29.2L525.8 498c-4.4 2-9.1 3.1-13.8 3.1zM235.8 301.7L512 433.6l276.2-131.9L512 176.2 235.8 301.7z","p-id":"2774"}})]),e("div",{staticClass:"empty-text"},[t._v(" "+t._s(t.$t("暂无记录"))+" ")])])},i=[],n={name:"BEmpty",data(){return{}}},l=n,c=s(5440),r=(0,c.Z)(l,a,i,!1,null,"4fb17fff",null),o=r.exports},2837:function(t,e,s){s.d(e,{Z:function(){return m}});var a=function(){var t=this,e=t._self._c;return e("el-input",t._g(t._b({ref:"input",class:[{focus:""!==t.value},t.align?`text-${t.align}`:""],attrs:{type:t.inputType,value:t.value,size:t.size},on:{input:t.input,focus:function(e){return t.focusEmit()},blur:t.hideFixed},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.enter.apply(null,arguments)}}},"el-input",t.$attrs,!1),t.$listeners),[t._t("prefix",null,{slot:"prefix"}),t._t("suffix",null,{slot:"suffix"})],2)},i=[],n=s(2388),l=s.n(n),c=s(2801),r={name:"BInput",components:{ElInput:l()},props:{value:{default:"",type:[String,Number]},type:{type:String,default:"text"},maxLength:{type:Number,default:50},decimal:{type:Number,default:8},min:{type:[Number,String],default:0},max:{type:[Number,String],default:""},focus:{type:Boolean,default:!1},size:{type:String,default:"max"},align:String,autoDecimals:{type:Boolean,default:!1}},computed:{inputType(){return"number"===this.type?"text":this.type}},watch:{focus:{handler(t){t&&this.$refs&&this.$refs.input&&this.$refs.input.focus()},immediate:!0},value(t){this.autoDecimals&&!isNaN(t)&&this.input(t||""),this.value&&this.value.toString().includes("e")&&this.input(t||"")}},mounted(){this.focus&&this.$refs&&this.$refs.input&&this.$refs.input.focus(),this.setStyle();const t=setTimeout((()=>{this.setStyle(),clearTimeout(t)}),300)},methods:{setStyle(){try{const t=this.$refs.input.$el,e=t.querySelector(".el-input__inner"),s=t.querySelector(".el-input__prefix"),a=t.querySelector(".el-input__suffix");s&&(e.style.paddingLeft=s.offsetWidth+20+"px"),a&&(e.style.paddingRight=a.offsetWidth+20+"px")}catch(t){}},focusEmit(){this.$emit("focus")},hideFixed(){this.$emit("blur")},enter(t){this.$emit("keyupEnter",t)},input(t){const{maxLength:e,decimal:s}=this;let a=t.toString();if("number"===this.type&&a.includes("e")&&(a=(0,c.iT)(a)),"number"===this.type&&(a=a.replace(/-+/g,"").replace(/[^-0123456789.。]/g,"").replace(/。/g,"."),a.includes(".")&&(a=a.split(".").slice(0,2).join("."))),e)if(s&&"number"===this.type){const t=a.split(".");t[0]=t[0].substr(0,e),a=t.join(".")}else a=a.substr(0,e);if("number"===this.type&&s&&/[.]/.test(a)){const t=a.split(".");t[1].length>s&&(a=[t[0],t[1].substr(0,s)].join("."))}"number"===this.type&&0===s&&/[.]/.test(a)&&(a=a.split(".")[0]),"number"!==this.type||!this.max&&0!==this.max||(a=this.max<Number(a)?this.max:a),"number"===this.type&&a&&a.toString().startsWith(".")&&(a=a.slice(1)),this.autoDecimals&&"number"===this.type&&a&&Number(a)&&!isNaN(a)&&""!==a&&(a=(0,c.ZI)(a).replace(/,/g,"")),this.innerValue=a,this.$nextTick((()=>{this.$emit("input",a)}))}}},o=r,d=s(5440),u=(0,d.Z)(o,a,i,!1,null,null,null),m=u.exports},9839:function(t,e,s){s.r(e),s.d(e,{default:function(){return g}});var a=function(){var t=this,e=t._self._c;return e("div",{staticClass:"home"},[e("div",{staticClass:"home-title"},[t._v(" "+t._s(t.$t("title"))+" ")]),e("div",{staticClass:"home-title"},[t._v(" "+t._s(t.$t("最大40倍奖金等你拿"))+" ")]),e("div",{staticClass:"flex-box space-center mg-t40"},[e("div",{staticClass:"period-number"},[e("div",{staticClass:"number"},[t._v(" 第 "+t._s(t.period)+" 期 ")]),e("span",{staticClass:"label"},[t._v(" "+t._s(t.$t("奖池资金"))+" ")]),e("div",{staticClass:"flex-box align-baseline"},[e("span",{staticClass:"amount"},[t._v(" "+t._s(t._f("numFormat")(t.awardBool))+" ")]),e("span",{staticClass:"unit"},[t._v(" MSJ ")])]),e("span",{staticClass:"time"},[t._v(" "+t._s(t._f("formatTime")(t.startTime))+" - "+t._s(t._f("formatTime")(t.endTime))+" ")])]),e("b-btn",{staticClass:"mg-l16",staticStyle:{"border-radius":"24px","padding-top":"10px","padding-bottom":"10px"},attrs:{disabled:t.isCannotOpen,loading:t.openLoading,type:"primary",size:"large"},on:{click:t.open}},[t._v(" "+t._s(t.$t("开奖"))+" ")])],1),e("div",{staticClass:"flex-box mg-t40 area-wrap"},[e("div",{staticClass:"left-area"},[e("div",{staticClass:"ts-20 tw-5 tc-primary mg-b24"},[t._v(" "+t._s(t.$t("选择号码"))+" ")]),e("div",{staticClass:"number-area"},t._l(49,(function(s){return e("span",{key:s,staticClass:"number-item",class:{active:t.checkedItem.includes(s)},on:{click:function(e){return t.checkItem(s)}}},[t._v(" "+t._s(s)+" ")])})),0),e("div",{staticClass:"mg-t24 flex-box"},[e("b-btn",{staticClass:"flex-box flex-1 auto-select",on:{click:t.autoSelect}},[e("span",{staticClass:"pd-r16 ts-14 tc-secondary"},[t._v(" "+t._s(t.$t("自动选择号码数"))+" ")]),t._l(t.persetArray,(function(s){return e("span",{staticClass:"flex-1 text-center ts-14 tc-secondary"},[t._v(t._s(s))])}))],2),e("b-btn",{staticClass:"mg-l8",on:{click:t.clearSelect}},[t._v(" "+t._s(t.$t("清除选项"))+" ")])],1),e("div",{staticClass:"mg-t40 ts-12 tc-secondary"},[t._v(" "+t._s(t.$t("游戏规则"))+" ")]),t._m(0),e("div",{staticClass:"mg-t80 ts-20 tw-5"},[t._v(" "+t._s(t.$t("开奖记录"))+" ")]),e("ul",{directives:[{name:"loading",rawName:"v-loading",value:t.awardLogLoading,expression:"awardLogLoading"}]},[t._l(t.awardInfo,(function(s){return e("li",{staticClass:"list-item"},[e("div",{staticClass:"column-1"},[e("div",{staticClass:"ts-14 tc-secondary"},[t._v(" 第 "+t._s(s.idx)+" 期 ")]),e("div",{staticClass:"ts-12 mg-t4 tc-tertiary"},[t._v(" "+t._s(t._f("formatTime")(s.fromTime+"000"))+" - "+t._s(t._f("formatTime")(s.toTime+"000"))+" ")])]),e("div",{staticClass:"column-2"},[e("div",{staticClass:"ts-14 tc-theme tw-7"},[t._v(" "+t._s(Number(s.random)?s.random:"--")+" ")]),e("div",{staticClass:"ts-12 mg-t4 tc-tertiary"},[t._v(" "+t._s(t.$t("中奖号码"))+" ")])]),e("div",{staticClass:"column-2"},[e("div",{staticClass:"ts-14 tc-theme tw-7"},[t._v(" "+t._s(0===Number(s.profitRate)?"--":Math.floor(s.profitRate/100))+" ")]),e("div",{staticClass:"ts-12 mg-t4 tc-tertiary"},[t._v(" "+t._s(t.$t("中奖倍数"))+" ")])])])})),t.awardInfo.length?t._e():e("li",{staticClass:"list-item"},[e("b-empty")],1)],2)]),e("div",{staticClass:"right-area"},[e("div",{staticClass:"invest-area"},[e("div",{staticClass:"flex-box space-between"},[e("span",{staticClass:"ts-20 tw-5"},[t._v(" "+t._s(t.$t("投注"))+" ")]),e("b-btn",{attrs:{loading:t.claimLoading},on:{click:t.claimMsj}},[t._v(t._s(t.$t("领取MSJ")))])],1),e("div",{staticClass:"mg-t24 ts-12 flex-box align-start"},[e("span",{staticClass:"mg-r8"},[t._v(" "+t._s(t.$t("已选号码数"))+" ")]),e("div",{staticClass:"tw-5 flex-1",staticStyle:{"word-break":"break-all"}},[t._v(" "+t._s(t.checkedItem.toString()||"--")+" ")])]),e("div",{staticClass:"mg-t24 ts-12"},[t._v(" "+t._s(t.$t("每注投注次数"))+" ")]),e("b-input",{staticClass:"mg-t8",attrs:{type:"number"},model:{value:t.amount,callback:function(e){t.amount=e},expression:"amount"}}),e("div",{staticClass:"flex-box mg-t24 space-between"},[e("span",{staticClass:"ts-12 tc-secondary"},[t._v(" "+t._s(t.$t("可用MSJ"))+" ")]),e("span",{staticClass:"ts-16 tw-7"},[t._v(" "+t._s(t.msjBalance)+" MSJ ")])]),e("div",{staticClass:"flex-box mg-t8 space-between"},[e("span",{staticClass:"ts-12 tc-secondary"},[t._v(" "+t._s(t.$t("总计下注"))+" ")]),e("span",{staticClass:"ts-16 tw-7"},[t._v(" "+t._s(t.totalInvest)+" MSJ ")])]),e("b-btn",{staticClass:"mg-t24 width-full",attrs:{loading:t.joinLoading,disabled:!Number(t.amount)||!t.checkedItem.length,type:"primary",size:"large"},on:{click:t.join}},[t._v(" "+t._s(t.allowance?t.$t("下注"):t.$t("授权"))+" ")])],1),e("div",{staticClass:"invite-area flex-box space-between"},[e("div",[e("div",{staticClass:"tc-rise ts-16 tw-5"},[t._v(" "+t._s(t.$t("邀请好友投注 1:1 挖矿 MSC"))+" ")]),e("div",{staticClass:"mg-t4 ts-12 tc-secondary"},[t._v(" "+t._s(t.$t("详细活动规则 >"))+" ")])]),e("el-tooltip",{attrs:{placement:"top"}},[e("div",{directives:[{name:"clipboard",rawName:"v-clipboard",value:()=>t.inviteHref,expression:"() => inviteHref"},{name:"clipboard",rawName:"v-clipboard:success",value:t.copySuccess,expression:"copySuccess",arg:"success"}],staticClass:"invite-btn",class:{disabled:!t.inviteHref},on:{mouseleave:function(e){t.isCopyed=!1}}},[t._v(" "+t._s(t.$t("复制邀请链接"))+" ")]),e("div",{staticClass:"text-center",staticStyle:{width:"120px"},attrs:{slot:"content"},slot:"content"},[t._v(" "+t._s(t.isCopyed?t.$t("Copy Success"):t.$t("Copy"))+" ")])])],1),e("div",{staticClass:"mg-t80 ts-20 tw-5"},[t._v(" "+t._s(t.$t("投注记录"))+" ")]),e("div",{directives:[{name:"loading",rawName:"v-loading",value:t.isLogined&&t.joinLogLoading,expression:"isLogined && joinLogLoading"}],staticClass:"invest-history mg-t24"},[t._l(t.joinLogs,(function(s){return e("div",{staticClass:"invest-history-item flex-box",on:{click:function(e){return t.showDetail(s)}}},[e("div",{staticClass:"mg-r16"},[e("div",{staticClass:"ts-14 tw-5 tc-secondary"},[t._v(" 第 "+t._s(s.idx)+" 期 ")]),e("div",{staticClass:"ts-12 tc-tertiary mg-t4"},[t._v(" "+t._s(t._f("formatTime")(s.updatedAt+"000"))+" ")])]),e("div",[e("div",{staticClass:"ellipsis ts-14 tw-7"},[t._v(" "+t._s(s.numbers.toString())+" ")]),e("div",{staticClass:"ts-12 tc-tertiary mg-t4"},[t._v(" "+t._s(t.$t("投注号码"))+" ")])]),e("div",{staticClass:"mg-l-auto text-right"},[e("div",{staticClass:"ts-14 tw-7 tc-rise"},[t._v(" "+t._s(t._f("numFormat")(s.total))+" ")]),e("div",{staticClass:"ts-12 tc-tertiary mg-t4"},[t._v(" "+t._s(t.$t("总计下注(MSJ)"))+" ")])]),e("renderAwardType",{attrs:{item:s}})],1)})),t.joinLogs.length?t._e():e("div",{staticClass:"invest-history-item not-hover"},[e("b-empty")],1)],2)])]),e("el-dialog",{attrs:{visible:t.isShowDetail,width:"480px"},on:{"update:visible":function(e){t.isShowDetail=e}}},[e("div",{staticClass:"ts-20 tw-5"},[t._v(" "+t._s(`第 ${t.currentJoinItem.idx} 期投注记录`)+" ")]),e("div",{staticClass:"flex-box mg-t32 space-between"},[e("span",{staticClass:"ts-14 tc-tertiary"},[t._v(" "+t._s(t.$t("中奖状态"))+" ")]),e("span",{staticClass:"ts-14 tc-secondary"},[t._v(" "+t._s([t.$t("未开奖"),t.$t("未中奖"),t.$t("待领奖"),t.$t("已领奖")][t.currentJoinItem.awardStatus])+" ")])]),e("div",{staticClass:"flex-box mg-t16 space-between"},[e("span",{staticClass:"ts-14 tc-tertiary"},[t._v(" "+t._s(t.$t("当期开奖号码"))+" ")]),e("span",{staticClass:"ts-14 tc-secondary"},[t._v(" "+t._s(Number(t.currentJoinItem.random)?t.currentJoinItem.random:"--")+" ")])]),e("div",{staticClass:"flex-box mg-t16 space-between align-start"},[e("span",{staticClass:"ts-14 tc-tertiary"},[t._v(" "+t._s(t.$t("投注号码"))+" ")]),e("span",{staticClass:"ts-14 tc-secondary flex-1 mg-l24 text-right"},[t._v(" "+t._s(t.currentJoinItem.numbers.toString())+" ")])]),e("div",{staticClass:"flex-box mg-t16 space-between"},[e("span",{staticClass:"ts-14 tc-tertiary"},[t._v(" "+t._s(t.$t("总计下注"))+" ")]),e("span",{staticClass:"ts-14 tc-secondary"},[t._v(" "+t._s(t._f("numFormat")(t.currentJoinItem.total))+" MSJ ")])]),e("div",{staticClass:"flex-box mg-t16 space-between"},[e("span",{staticClass:"ts-14 tc-tertiary"},[t._v(" "+t._s(t.$t("中奖金额"))+" ")]),e("span",{staticClass:"ts-20 tc-theme tw-b"},[t._v(" "+t._s(t._f("numFormat")(Number(t.currentJoinItem.award)?Number(t.currentJoinItem.award):"--"))+" MSJ ")])]),e("b-btn",{staticClass:"width-full mg-t32",attrs:{disabled:2!==t.currentJoinItem.awardStatus,loading:t.claimAwardLoading,type:"primary",size:"large"},on:{click:t.claimAward}},[t._v(" "+t._s(t.$t("立即领奖"))+" ")])],1)],1)},i=[function(){var t=this,e=t._self._c;return e("div",{staticClass:"mg-t8 ts-12 tc-secondary"},[t._v(" 1-49，49个数字，用户随便选号码投注，每注1U，到达开奖时间后开奖开出一个中奖号码，选对的用户可以领取最大40倍的奖金。挖矿：投注者：邀请者：开发者 = 10：10：3。平... "),e("span",{staticClass:"tc-theme cursor-pointer"},[t._v(" 更多游戏规则> ")])])}],n=(s(3422),s(6230)),l=s(817),c=s.n(l),r=s(5933),o=s.n(r);const d={name:"renderAwardType",props:{item:{type:[Array,Object],default(){return{}}}},render(){const t=[this.$t("未开奖"),this.$t("未中奖"),this.$t("待领奖"),this.$t("已领奖")],e=["rgba(155, 171, 204, 0.12)","rgba(155, 171, 204, 0.12)","rgba(170,255,0, .2)","rgba(5,184,141, .2)"],s=["#80889B","#80889B","#AAFF00","#05B88D"],a=this.$createElement;return a("div",{class:"tag",style:{backgroundColor:e[this.item.awardStatus]}},[a("span",{style:{color:s[this.item.awardStatus]}},t[this.item.awardStatus])])}};var u={name:"Home",components:{ElTooltip:c(),ElDialog:o(),renderAwardType:d},data(){return{checkedItem:[],amount:"",period:"",startTime:"",endTime:"",awardBool:"",allowance:0,msjBalance:0,joinLoading:!1,joinLogs:[],awardInfo:[],inviteHref:"",isCopyed:!1,persetArray:[5,10,15,20,25],isLogined:!1,joinLogLoading:!0,awardLogLoading:!0,isShowDetail:!1,currentJoinItem:{numbers:[]},claimLoading:!1,gameInfo:{},claimAwardLoading:!1,isCannotOpen:!0,openLoading:!1}},computed:{totalInvest(){return this.checkedItem.length*(this.amount||0)}},async mounted(){await this.initGameInfo(),this.$route.query.inviter&&localStorage.setItem("inviter",this.$route.query.inviter),this.$wallet.currentWallet&&this.$wallet.currentWallet.defaultAccount&&this.init(),this.$wallet.on("ready",(()=>{this.init()})),this.$notify,setInterval((()=>{this.init(!1),this.initGameInfo(!1),this.getMsjBalance()}),12e4)},methods:{async init(t=!0){if(!this.$wallet.currentWallet.defaultAccount)return;this.isLogined=!0,this.inviteHref=location.origin+"?inviter="+this.$wallet.currentWallet.defaultAccount;const e=this.$wallet.currentWallet.createInstance(n.Z.gameAbi,n.Z.gameAddress),s=await e.methods.canApplyVRF().call();this.isCannotOpen=!s,this.getApproveAmount(),this.getJoinLogs(t),this.getMsjBalance()},async initGameInfo(t=!0){t&&(this.awardLogLoading=!0);const e=this.$wallet.currentWallet.createInstance(n.Z.gameAbi,n.Z.gameAddress),s=await e.methods.getGame(0).call(),a=await e.methods.getGames(1,10).call();console.log(a),this.awardInfo=a,this.period=s.idx,this.startTime=s.fromTime+"000",this.endTime=s.toTime+"000",this.awardBool=this.$decimalUtils.weiToVal(s.awardBool),this.awardLogLoading=!1,this.gameInfo=s},async getMsjBalance(){const t=this.$wallet.currentWallet.createInstance(n.Z.ERC20Abi,n.Z.investTokenAddress),e=await t.methods.balanceOf(this.$wallet.currentWallet.defaultAccount).call();this.msjBalance=this.$decimalUtils.weiToVal(e)},async claimMsj(){this.claimLoading=!0;const t=this.$wallet.currentWallet.createInstance(n.Z.msjFaucetAbi,n.Z.msjFaucetAddress);t.methods.claim().send({from:this.$wallet.currentWallet.defaultAccount}).on("confirmation",(t=>{this.claimLoading=!1,2===Number(t)&&this.getMsjBalance()})).on("receipt",(()=>{this.claimLoading=!1,this.$notify({message:"Success",offset:88,type:"success"})})).catch((t=>{this.claimLoading=!1,this.$notify({message:t,offset:88,type:"error"})}))},async getJoinLogs(t=!0){t&&(this.joinLogLoading=!0);const e=this.$wallet.currentWallet.createInstance(n.Z.gameAbi,n.Z.gameAddress),s=await e.methods.getJoins(this.$wallet.currentWallet.defaultAccount,0,10).call();console.log(s),this.joinLogs=s.map((t=>{let e=1;return Number(this.gameInfo.idx)===Number(t.idx)?e=0:t.isReceiveAward?e=3:t.numbers.includes(t.random)&&!t.isReceiveAward&&(e=2),{...t,award:this.$decimalUtils.weiToVal(t.award),awardStatus:e}})),this.joinLogLoading=!1},async getApproveAmount(){const t=this.$wallet.currentWallet.createInstance(n.Z.ERC20Abi,n.Z.investTokenAddress),e=await t.methods.allowance(this.$wallet.currentWallet.defaultAccount,n.Z.gameAddress).call({from:this.$wallet.currentWallet.defaultAccount});this.allowance=Number(e)},async approve(){this.joinLoading=!0;try{const t=this.$wallet.currentWallet.createInstance(n.Z.ERC20Abi,n.Z.investTokenAddress),e=this.$wallet.currentWallet.web3.utils.toBN(n.Z.maxUInt);return await t.methods.approve(n.Z.gameAddress,e).send({from:this.$wallet.currentWallet.defaultAccount}).on("receipt",(()=>{this.$notify({message:"Approve Success",offset:88,type:"success"})})).catch((t=>{this.$notify({message:t,offset:88,type:"error"})})),this.getApproveAmount(),this.joinLoading=!1,!0}catch(t){return console.log("approve error: ",t),this.joinLoading=!1,!1}},async claimAward(){this.claimAwardLoading=!0;const t=this.$wallet.currentWallet.createInstance(n.Z.gameAbi,n.Z.gameAddress);t.methods.receiveAward(this.currentJoinItem.idx).send({from:this.$wallet.currentWallet.defaultAccount}).on("confirmation",(t=>{this.claimAwardLoading=!1,2===Number(t)&&this.getJoinLogs()})).on("receipt",(()=>{this.claimAwardLoading=!1,this.isShowDetail=!1,this.$notify({message:"Claim Success",offset:88,type:"success"})})).catch((t=>{this.claimAwardLoading=!1,console.log(t),this.$notify({message:t,offset:88,type:"error"})}))},async join(){if(!this.allowance)return void this.approve();this.joinLoading=!0;const t=this.$wallet.currentWallet.createInstance(n.Z.gameAbi,n.Z.gameAddress);t.methods.Join(localStorage.getItem("inviter")||"0x0000000000000000000000000000000000000000",this.checkedItem,new Array(this.checkedItem.length).fill(this.amount)).send({from:this.$wallet.currentWallet.defaultAccount}).on("confirmation",(t=>{this.joinLoading=!1,2===Number(t)&&(this.getJoinLogs(),this.initGameInfo(),this.checkedItem=[],this.amount="")})).on("receipt",(()=>{this.joinLoading=!1,this.$notify({message:"Success",offset:88,type:"success"})})).catch((t=>{this.joinLoading=!1,console.log(t),this.$notify({message:t,offset:88,type:"error"})}))},async open(){this.openLoading=!0;const t=this.$wallet.currentWallet.createInstance(n.Z.gameAbi,n.Z.gameAddress);t.methods.ApplyVRF().send({from:this.$wallet.currentWallet.defaultAccount}).on("confirmation",(t=>{this.openLoading=!1,2===Number(t)&&(this.init(),this.initGameInfo())})).on("receipt",(()=>{this.openLoading=!1,this.$notify({message:"Success",offset:88,type:"success"})})).catch((t=>{this.openLoading=!1,this.$notify({message:t,offset:88,type:"error"})}))},checkItem(t){const e=this.checkedItem.indexOf(t);e>-1?this.checkedItem.splice(e,1):this.checkedItem.push(t)},copySuccess(){this.isCopyed=!0},autoSelect(){this.persetArray.forEach((t=>{this.checkedItem.includes(t)||this.checkedItem.push(t)}))},clearSelect(){this.checkedItem=[]},showDetail(t){console.log(t),this.currentJoinItem=t,this.isShowDetail=!0}}},m=u,h=s(5440),p=(0,h.Z)(m,a,i,!1,null,"3ee58d84",null),g=p.exports}}]);